<!DOCTYPE html>
<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Volt: Template Engine — Phalcon 1.3.0 documentation</title>
<link href="http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300italic,400italic,500italic&amp;subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../_static/A.pygments.css+style.css+docs.css,Mcc.WzpOlAvwWN.css.pagespeed.cf.Utjfc6NUWU.css" type="text/css">



<link rel="shortcut icon" href="../_static/favicon.ico">
<link rel="top" title="Phalcon 1.3.0 documentation" href="../index.html">
<link rel="next" title="MVC Applications" href="applications.html">
<link rel="prev" title="Assets Management" href="assets.html">
</head>
<body>
<div id="wrapper">



<table width="100%" align="center">
<tr>

<td class="second-box" valign="top">
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body">
<div class="section" id="volt-template-engine">
<h1>Volt: Template Engine</h1>
<p>Volt is an ultra-fast and designer friendly templating language written in C for PHP. It provides you a set of
helpers to write views in an easy way. Volt is highly integrated with other components of Phalcon,
just as you can use it as a stand-alone component in your applications.</p>
<div class="figure align-center">
<img alt="../_images/volt.jpg" src="../_images/xvolt.jpg.pagespeed.ic.C94bKTGP5G.jpg" pagespeed_url_hash="905752524">
</div>
<p>Volt is inspired by <a class="reference external" href="http://jinja.pocoo.org/">Jinja</a>, originally created by <a class="reference external" href="https://github.com/mitsuhiko">Armin Ronacher</a>. Therefore many developers will be in familiar
territory using the same syntax they have been using with similar template engines. Volt’s syntax and features
have been enhanced with more elements and of course with the performance that developers have been
accustomed to while working with Phalcon.</p>
<div class="section" id="introduction">
<h2>Introduction
</h2>
<p>Volt views are compiled to pure PHP code, so basically they save the effort of writing PHP code manually:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# app/views/products/show.volt #}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">last_products</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">product</span> <span class="k">in</span> <span class="nv">products</span> <span class="cp">%}</span>
    * Name: <span class="cp">{{</span> <span class="nv">product.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">product.status</span> <span class="o">==</span> <span class="s2">"Active"</span> <span class="cp">%}</span>
       Price: <span class="cp">{{</span> <span class="nv">product.price</span> <span class="o">+</span> <span class="nv">product.taxes</span><span class="o">/</span><span class="m">100</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span>  <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span>  <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="activating-volt">
<h2>Activating Volt
</h2>
<p>As other template engines, you may register Volt in the view component, using a new extension or
reusing the standard .phtml:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Registering Volt as template engine</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'view'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View</span><span class="p">();</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s1">'../app/views/'</span><span class="p">);</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">".volt"</span> <span class="o">=&gt;</span> <span class="s1">'Phalcon\Mvc\View\Engine\Volt'</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Use the standard ”.phtml” extension:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">".phtml"</span> <span class="o">=&gt;</span> <span class="s1">'Phalcon\Mvc\View\Engine\Volt'</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage
</h2>
<p>A view consists of Volt code, PHP and HTML. A set of special delimiters is available to enter into
Volt mode. {% ... %} is used to execute statements such as for-loops or assign values and {{ ... }},
prints the result of an expression to the template.</p>
<p>Below is a minimal template that illustrates a few basics:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# app/views/posts/show.phtml #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span> - An example blog<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="cp">{%</span> <span class="k">if</span> <span class="nv">show_navigation</span> <span class="cp">%}</span>
            <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"navigation"</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">menu</span> <span class="cp">%}</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">item.href</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
            <span class="nt">&lt;/ul&gt;</span>
        <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

        <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span>
            <span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span>
        <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Using Phalcon\Mvc\View you can pass variables from the controller to the views.
In the above example, three variables were passed to the view: title, menu and post:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">\Phalcon\Mvc\Controller</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="nv">$post</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">findFirst</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">post</span> <span class="o">=</span> <span class="nv">$post</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">menu</span> <span class="o">=</span> <span class="nx">Menu</span><span class="o">::</span><span class="na">find</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">show_navigation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="variables">
<h2>Variables
</h2>
<p>Object variables may have attributes which can be accessed using the syntax: foo.bar.
If you are passing arrays, you have to use the square bracket syntax: foo[‘bar’]</p>
<div class="highlight-jinja">
<div class="highlight"><pre><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# for $post-&gt;title #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">post</span><span class="o">[</span><span class="s1">'title'</span><span class="o">]</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# for $post['title'] #}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="filters">
<h2>Filters
</h2>
<p>Variables can be formatted or modified using filters. The pipe operator | is used to apply filters to
variables:</p>
<div class="highlight-jinja">
<div class="highlight"><pre><span class="cp">{{</span> <span class="nv">post.title</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">post.content</span><span class="o">|</span><span class="nf">striptags</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">name</span><span class="o">|</span><span class="nf">capitalize</span><span class="o">|</span><span class="nf">trim</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>The following is the list of available built-in filters in Volt:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Filter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>e</td>
<td>Applies Phalcon\Escaper-&gt;escapeHtml to the value</td>
</tr>
<tr class="row-odd">
<td>escape</td>
<td>Applies Phalcon\Escaper-&gt;escapeHtml to the value</td>
</tr>
<tr class="row-even">
<td>escape_css</td>
<td>Applies Phalcon\Escaper-&gt;escapeCss to the value</td>
</tr>
<tr class="row-odd">
<td>escape_js</td>
<td>Applies Phalcon\Escaper-&gt;escapeJs to the value</td>
</tr>
<tr class="row-even">
<td>escape_attr</td>
<td>Applies Phalcon\Escaper-&gt;escapeHtmlAttr to the value</td>
</tr>
<tr class="row-odd">
<td>trim</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.trim.php">trim</a> PHP function to the value. Removing extra spaces</td>
</tr>
<tr class="row-even">
<td>left_trim</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.ltrim.php">ltrim</a> PHP function to the value. Removing extra spaces</td>
</tr>
<tr class="row-odd">
<td>right_trim</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.rtrim.php">rtrim</a> PHP function to the value. Removing extra spaces</td>
</tr>
<tr class="row-even">
<td>striptags</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.striptags.php">striptags</a> PHP function to the value. Removing HTML tags</td>
</tr>
<tr class="row-odd">
<td>slashes</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.slashes.php">slashes</a> PHP function to the value. Escaping values</td>
</tr>
<tr class="row-even">
<td>stripslashes</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.stripslashes.php">stripslashes</a> PHP function to the value. Removing escaped quotes</td>
</tr>
<tr class="row-odd">
<td>capitalize</td>
<td>Capitalizes a string by applying the <a class="reference external" href="http://php.net/manual/en/function.ucwords.php">ucwords</a> PHP function to the value</td>
</tr>
<tr class="row-even">
<td>lower</td>
<td>Change the case of a string to lowercase</td>
</tr>
<tr class="row-odd">
<td>upper</td>
<td>Change the case of a string to uppercase</td>
</tr>
<tr class="row-even">
<td>length</td>
<td>Counts the string length or how many items are in an array or object</td>
</tr>
<tr class="row-odd">
<td>nl2br</td>
<td>Changes newlines \n by line breaks (&lt;br /&gt;). Uses the PHP function <a class="reference external" href="http://php.net/manual/en/function.nl2br.php">nl2br</a>
</td>
</tr>
<tr class="row-even">
<td>sort</td>
<td>Sorts an array using the PHP function <a class="reference external" href="http://php.net/manual/en/function.asort.php">asort</a>
</td>
</tr>
<tr class="row-odd">
<td>keys</td>
<td>Returns the array keys using <a class="reference external" href="http://php.net/manual/en/function.array-keys.php">array_keys</a>
</td>
</tr>
<tr class="row-even">
<td>join</td>
<td>Joins the array parts using a separator <a class="reference external" href="http://php.net/manual/en/function.join.php">join</a>
</td>
</tr>
<tr class="row-odd">
<td>format</td>
<td>Formats a string using <a class="reference external" href="http://php.net/manual/en/function.sprintf.php">sprintf</a>.</td>
</tr>
<tr class="row-even">
<td>json_encode</td>
<td>Converts a value into its <a class="reference external" href="http://php.net/manual/en/function.json-encode.php">JSON</a> representation</td>
</tr>
<tr class="row-odd">
<td>json_decode</td>
<td>Converts a value from its <a class="reference external" href="http://php.net/manual/en/function.json-encode.php">JSON</a> representation to a PHP representation</td>
</tr>
<tr class="row-even">
<td>abs</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.abs.php">abs</a> PHP function to a value.</td>
</tr>
<tr class="row-odd">
<td>url_encode</td>
<td>Applies the <a class="reference external" href="http://php.net/manual/en/function.urlencode.php">urlencode</a> PHP function to the value</td>
</tr>
<tr class="row-even">
<td>default</td>
<td>Sets a default value in case that the evaluated expression is empty
(is not set or evaluates to a falsy value)</td>
</tr>
<tr class="row-odd">
<td>convert_encoding</td>
<td>Converts a string from one charset to another</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-jinja">
<div class="highlight"><pre><span class="c">{# e or escape filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"&lt;h1&gt;Hello&lt;h1&gt;"</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"&lt;h1&gt;Hello&lt;h1&gt;"</span><span class="o">|</span><span class="nf">escape</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# trim filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"   hello   "</span><span class="o">|</span><span class="nf">trim</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# striptags filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"&lt;h1&gt;Hello&lt;h1&gt;"</span><span class="o">|</span><span class="nf">striptags</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# slashes filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"'this is a string'"</span><span class="o">|</span><span class="nf">slashes</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# stripslashes filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"\'this is a string\'"</span><span class="o">|</span><span class="nf">stripslashes</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# capitalize filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"hello"</span><span class="o">|</span><span class="nf">capitalize</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# lower filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"HELLO"</span><span class="o">|</span><span class="nf">lower</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# upper filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"hello"</span><span class="o">|</span><span class="nf">upper</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# length filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"robots"</span><span class="o">|</span><span class="nf">length</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">,</span> <span class="m">3</span><span class="o">]|</span><span class="nf">length</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# nl2br filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"some\ntext"</span><span class="o">|</span><span class="nf">nl2br</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# sort filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">sorted</span><span class="o">=[</span><span class="m">3</span><span class="o">,</span> <span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">]|</span><span class="nf">sort</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# keys filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">keys</span><span class="o">=[</span><span class="s1">'first'</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">'second'</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span> <span class="s1">'third'</span><span class="o">:</span> <span class="m">3</span><span class="o">]|</span><span class="nf">keys</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# json_encode filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">robots</span><span class="o">|</span><span class="nf">json_encode</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# json_decode filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">decoded</span><span class="o">=</span><span class="s1">'{"one":1,"two":2,"three":3}'</span><span class="o">|</span><span class="nf">json_decode</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# url_encode filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">post.permanent_link</span><span class="o">|</span><span class="nf">url_encode</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# convert_encoding filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">"désolé"</span><span class="o">|</span><span class="nf">convert_encoding</span><span class="o">(</span><span class="s1">'utf8'</span><span class="o">,</span> <span class="s1">'latin1'</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="comments">
<h2>Comments
</h2>
<p>Comments may also be added to a template using the {# ... #} delimiters. All text inside them is just ignored in the final output:</p>
<div class="highlight-jinja">
<div class="highlight"><pre><span class="c">{# note: this is a comment</span>
<span class="c">    {% set price = 100; %}</span>
<span class="c">#}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="list-of-control-structures">
<h2>List of Control Structures
</h2>
<p>Volt provides a set of basic but powerful control structures for use in templates:</p>
<div class="section" id="for">
<h3>For
</h3>
<p>Loop over each item in a sequence. The following example shows how to traverse a set of “robots” and print his/her name:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>for-loops can also be nested:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">for</span> <span class="nv">part</span> <span class="k">in</span> <span class="nv">robot.parts</span> <span class="cp">%}</span>
  Robot: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> Part: <span class="cp">{{</span> <span class="nv">part.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> <span class="nt">&lt;br/&gt;</span>
  <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You can get the element “keys” as in the PHP counterpart using the following syntax:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'one'</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">'two'</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span> <span class="s1">'three'</span><span class="o">:</span> <span class="m">3</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">name</span><span class="o">,</span> <span class="nv">value</span> <span class="k">in</span> <span class="nv">numbers</span> <span class="cp">%}</span>
  Name: <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> Value: <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>An “if” evaluation can be optionally set:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'one'</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">'two'</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span> <span class="s1">'three'</span><span class="o">:</span> <span class="m">3</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">value</span> <span class="k">in</span> <span class="nv">numbers</span> <span class="k">if</span> <span class="nv">value</span> <span class="o">&lt;</span> <span class="m">2</span> <span class="cp">%}</span>
  Name: <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> Value: <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">name</span><span class="o">,</span> <span class="nv">value</span> <span class="k">in</span> <span class="nv">numbers</span> <span class="k">if</span> <span class="nv">name</span> <span class="p">!</span><span class="o">=</span> <span class="s1">'two'</span> <span class="cp">%}</span>
  Name: <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> Value: <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>If an ‘else’ is defined inside the ‘for’, it will be executed if the expression in the iterator result in zero iterations:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    Robot: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> Part: <span class="cp">{{</span> <span class="nv">part.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> <span class="nt">&lt;br/&gt;</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    There are no robots to show
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Alternative syntax:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    Robot: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> Part: <span class="cp">{{</span> <span class="nv">part.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> <span class="nt">&lt;br/&gt;</span>
<span class="cp">{%</span> <span class="k">elsefor</span> <span class="cp">%}</span>
    There are no robots to show
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-controls">
<h3>Loop Controls
</h3>
<p>The ‘break’ and ‘continue’ statements can be used to exit from a loop or force an iteration in the current block:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# skip the even robots #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">index</span><span class="o">,</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">index</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">continue</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# exit the foreach on the first even robot #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">index</span><span class="o">,</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">index</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">break</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="if">
<h3>If
</h3>
<p>As PHP, an “if” statement checks if an expression is evaluated as true or false:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Cyborg Robots<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">"cyborg"</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>The else clause is also supported:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">"cyborg"</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> (not a cyborg)<span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>The ‘elseif’ control flow structure can be used together with if to emulate a ‘switch’ block:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">"cyborg"</span> <span class="cp">%}</span>
    Robot is a cyborg
<span class="cp">{%</span> <span class="k">elseif</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">"virtual"</span> <span class="cp">%}</span>
    Robot is virtual
<span class="cp">{%</span> <span class="k">elseif</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">"mechanical"</span> <span class="cp">%}</span>
    Robot is mechanical
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-context">
<h3>Loop Context
</h3>
<p>A special variable is available inside ‘for’ loops providing you information about</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>loop.index</td>
<td>The current iteration of the loop. (1 indexed)</td>
</tr>
<tr class="row-odd">
<td>loop.index0</td>
<td>The current iteration of the loop. (0 indexed)</td>
</tr>
<tr class="row-even">
<td>loop.revindex</td>
<td>The number of iterations from the end of the loop (1 indexed)</td>
</tr>
<tr class="row-odd">
<td>loop.revindex0</td>
<td>The number of iterations from the end of the loop (0 indexed)</td>
</tr>
<tr class="row-even">
<td>loop.first</td>
<td>True if in the first iteration.</td>
</tr>
<tr class="row-odd">
<td>loop.last</td>
<td>True if in the last iteration.</td>
</tr>
<tr class="row-even">
<td>loop.length</td>
<td>The number of items to iterate</td>
</tr>
</tbody>
</table>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.first</span> <span class="cp">%}</span>
        <span class="nt">&lt;table&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th&gt;</span>#<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Id<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Name<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
        <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">robot.id</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>
        <span class="nt">&lt;/table&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="assignments">
<h2>Assignments
</h2>
<p>Variables may be changed in a template using the instruction “set”:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">fruits</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'Apple'</span><span class="o">,</span> <span class="s1">'Banana'</span><span class="o">,</span> <span class="s1">'Orange'</span><span class="o">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">name</span> <span class="o">=</span> <span class="nv">robot.name</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Multiple assignments are allowed in the same instruction:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">fruits</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'Apple'</span><span class="o">,</span> <span class="s1">'Banana'</span><span class="o">,</span> <span class="s1">'Orange'</span><span class="o">],</span> <span class="nv">name</span> <span class="o">=</span> <span class="nv">robot.name</span><span class="o">,</span> <span class="nv">active</span> <span class="o">=</span> <span class="kp">true</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Additionally, you can use compound assignment operators:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">price</span> <span class="o">+=</span> <span class="m">100.00</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">age</span> <span class="o">*=</span> <span class="m">5</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The following operators are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>=</td>
<td>Standard Assignment</td>
</tr>
<tr class="row-odd">
<td>+=</td>
<td>Addition assignment</td>
</tr>
<tr class="row-even">
<td>-=</td>
<td>Subtraction assignment</td>
</tr>
<tr class="row-odd">
<td>
<a href="volt.html#id1"><span class="problematic" id="id2">*</span></a>=</td>
<td>Multiplication assignment</td>
</tr>
<tr class="row-even">
<td>/=</td>
<td>Division assignment</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="expressions">
<h2>Expressions
</h2>
<p>Volt provides a basic set of expression support, including literals and common operators.</p>
<p>A expression can be evaluated and printed using the ‘{{‘ and ‘}}’ delimiters:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{{</span> <span class="o">(</span><span class="m">1</span> <span class="o">+</span> <span class="m">1</span><span class="o">)</span> <span class="o">*</span> <span class="m">2</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If an expression needs to be evaluated without be printed the ‘do’ statement can be used:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">do</span> <span class="o">(</span><span class="m">1</span> <span class="o">+</span> <span class="m">1</span><span class="o">)</span> <span class="o">*</span> <span class="m">2</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="section" id="literals">
<h3>Literals
</h3>
<p>The following literals are supported:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Filter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>“this is a string”</td>
<td>Text between double quotes or single quotes are handled as strings</td>
</tr>
<tr class="row-odd">
<td>100.25</td>
<td>Numbers with a decimal part are handled as doubles/floats</td>
</tr>
<tr class="row-even">
<td>100</td>
<td>Numbers without a decimal part are handled as integers</td>
</tr>
<tr class="row-odd">
<td>false</td>
<td>Constant “false” is the boolean false value</td>
</tr>
<tr class="row-even">
<td>true</td>
<td>Constant “true” is the boolean true value</td>
</tr>
<tr class="row-odd">
<td>null</td>
<td>Constant “null” is the Null value</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="arrays">
<h3>Arrays
</h3>
<p>Whether you’re using PHP 5.3, 5.4 or 5.5, you can create arrays by enclosing a list of values in square brackets:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# Simple array #}</span>
<span class="cp">{{</span> <span class="o">[</span><span class="s1">'Apple'</span><span class="o">,</span> <span class="s1">'Banana'</span><span class="o">,</span> <span class="s1">'Orange'</span><span class="o">]</span> <span class="cp">}}</span>

<span class="c">{# Other simple array #}</span>
<span class="cp">{{</span> <span class="o">[</span><span class="s1">'Apple'</span><span class="o">,</span> <span class="m">1</span><span class="o">,</span> <span class="m">2.5</span><span class="o">,</span> <span class="kp">false</span><span class="o">,</span> <span class="nv">null</span><span class="o">]</span> <span class="cp">}}</span>

<span class="c">{# Multi-Dimensional array #}</span>
<span class="cp">{{</span> <span class="o">[[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">],</span> <span class="o">[</span><span class="m">3</span><span class="o">,</span> <span class="m">4</span><span class="o">],</span> <span class="o">[</span><span class="m">5</span><span class="o">,</span> <span class="m">6</span><span class="o">]]</span> <span class="cp">}}</span>

<span class="c">{# Hash-style array #}</span>
<span class="cp">{{</span> <span class="o">[</span><span class="s1">'first'</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">'second'</span><span class="o">:</span> <span class="m">4</span><span class="o">/</span><span class="m">2</span><span class="o">,</span> <span class="s1">'third'</span><span class="o">:</span> <span class="s1">'3'</span><span class="o">]</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Curly braces also can be used to define arrays or hashes:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">myArray</span> <span class="o">=</span> <span class="o">{</span><span class="s1">'Apple'</span><span class="o">,</span> <span class="s1">'Banana'</span><span class="o">,</span> <span class="s1">'Orange'</span><span class="o">}</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">myHash</span> <span class="o">=</span> <span class="o">{</span><span class="s1">'first'</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">'second'</span><span class="o">:</span> <span class="m">4</span><span class="o">/</span><span class="m">2</span><span class="o">,</span> <span class="s1">'third'</span><span class="o">:</span> <span class="s1">'3'</span><span class="o">}</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="math">
<h3>Math
</h3>
<p>You may make calculations in templates using the following operators:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>+</td>
<td>Perform an adding operation. {{ 2 + 3 }} returns 5</td>
</tr>
<tr class="row-odd">
<td>-</td>
<td>Perform a substraction operation {{ 2 - 3 }} returns -1</td>
</tr>
<tr class="row-even">
<td>*</td>
<td>Perform a multiplication operation {{ 2 * 3 }} returns 6</td>
</tr>
<tr class="row-odd">
<td>/</td>
<td>Perform a division operation {{ 10 / 2 }} returns 5</td>
</tr>
<tr class="row-even">
<td>%</td>
<td>Calculate the remainder of an integer division {{ 10 % 3 }} returns 1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="comparisons">
<h3>Comparisons
</h3>
<p>The following comparison operators are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>==</td>
<td>Check whether both operands are equal</td>
</tr>
<tr class="row-odd">
<td>!=</td>
<td>Check whether both operands aren’t equal</td>
</tr>
<tr class="row-even">
<td>&lt;&gt;</td>
<td>Check whether both operands aren’t equal</td>
</tr>
<tr class="row-odd">
<td>&gt;</td>
<td>Check whether left operand is greater than right operand</td>
</tr>
<tr class="row-even">
<td>&lt;</td>
<td>Check whether left operand is less than right operand</td>
</tr>
<tr class="row-odd">
<td>&lt;=</td>
<td>Check whether left operand is less or equal than right operand</td>
</tr>
<tr class="row-even">
<td>&gt;=</td>
<td>Check whether left operand is greater or equal than right operand</td>
</tr>
<tr class="row-odd">
<td>===</td>
<td>Check whether both operands are identical</td>
</tr>
<tr class="row-even">
<td>!==</td>
<td>Check whether both operands aren’t identical</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="logic">
<h3>Logic
</h3>
<p>Logic operators are useful in the “if” expression evaluation to combine multiple tests:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>or</td>
<td>Return true if the left or right operand is evaluated as true</td>
</tr>
<tr class="row-odd">
<td>and</td>
<td>Return true if both left and right operands are evaluated as true</td>
</tr>
<tr class="row-even">
<td>not</td>
<td>Negates an expression</td>
</tr>
<tr class="row-odd">
<td>( expr )</td>
<td>Parenthesis groups expressions</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="other-operators">
<h3>Other Operators
</h3>
<p>Additional operators seen the following operators are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%">
<col width="81%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>~</td>
<td>Concatenates both operands {{ “hello ” ~ “world” }}</td>
</tr>
<tr class="row-odd">
<td>|</td>
<td>Applies a filter in the right operand to the left {{ “hello”|uppercase }}</td>
</tr>
<tr class="row-even">
<td>..</td>
<td>Creates a range {{ ‘a’..’z’ }} {{ 1..10 }}</td>
</tr>
<tr class="row-odd">
<td>is</td>
<td>Same as == (equals), also performs tests</td>
</tr>
<tr class="row-even">
<td>in</td>
<td>To check if an expression is contained into other expressions if “a” in “abc”</td>
</tr>
<tr class="row-odd">
<td>is not</td>
<td>Same as != (not equals)</td>
</tr>
<tr class="row-even">
<td>‘a’ ? ‘b’ : ‘c’</td>
<td>Ternary operator. The same as the PHP ternary operator</td>
</tr>
<tr class="row-odd">
<td>++</td>
<td>Increments a value</td>
</tr>
<tr class="row-even">
<td>–</td>
<td>Decrements a value</td>
</tr>
</tbody>
</table>
<p>The following example shows how to use operators:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">robots</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'Voltron'</span><span class="o">,</span> <span class="s1">'Astro Boy'</span><span class="o">,</span> <span class="s1">'Terminator'</span><span class="o">,</span> <span class="s1">'C3PO'</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">index</span> <span class="k">in</span> <span class="m">0.</span><span class="nv">.robots</span><span class="o">|</span><span class="nf">length</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">robots</span><span class="o">[</span><span class="nv">index</span><span class="o">]</span> <span class="k">is</span> <span class="nf">defined</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="s2">"Name: "</span> <span class="o">~</span> <span class="nv">robots</span><span class="o">[</span><span class="nv">index</span><span class="o">]</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="tests">
<h2>Tests
</h2>
<p>Tests can be used to test if a variable has a valid expected value. The operator “is” is used to perform the tests:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">robots</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'1'</span><span class="o">:</span> <span class="s1">'Voltron'</span><span class="o">,</span> <span class="s1">'2'</span><span class="o">:</span> <span class="s1">'Astro Boy'</span><span class="o">,</span> <span class="s1">'3'</span><span class="o">:</span> <span class="s1">'Terminator'</span><span class="o">,</span> <span class="s1">'4'</span><span class="o">:</span> <span class="s1">'C3PO'</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">position</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">position</span> <span class="k">is</span> <span class="nf">odd</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The following built-in tests are available in Volt:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%">
<col width="81%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Test</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>defined</td>
<td>Checks if a variable is defined (isset)</td>
</tr>
<tr class="row-odd">
<td>empty</td>
<td>Checks if a variable is empty</td>
</tr>
<tr class="row-even">
<td>even</td>
<td>Checks if a numeric value is even</td>
</tr>
<tr class="row-odd">
<td>odd</td>
<td>Checks if a numeric value is odd</td>
</tr>
<tr class="row-even">
<td>numeric</td>
<td>Checks if value is numeric</td>
</tr>
<tr class="row-odd">
<td>scalar</td>
<td>Checks if value is scalar (not an array or object)</td>
</tr>
<tr class="row-even">
<td>iterable</td>
<td>Checks if a value is iterable. Can be traversed by a “for” statement</td>
</tr>
<tr class="row-odd">
<td>divisibleby</td>
<td>Checks if a value is divisible by other value</td>
</tr>
<tr class="row-even">
<td>sameas</td>
<td>Checks if a value is identical to other value</td>
</tr>
<tr class="row-odd">
<td>type</td>
<td>Checks if a value is of the specified type</td>
</tr>
</tbody>
</table>
<p>More examples:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot</span> <span class="k">is</span> <span class="nf">defined</span> <span class="cp">%}</span>
    The robot variable is defined
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot</span> <span class="k">is</span> <span class="nf">empty</span> <span class="cp">%}</span>
    The robot is null or isn't defined
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">'Voltron'</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">'Astroy Boy'</span><span class="o">,</span> <span class="m">3</span><span class="o">:</span> <span class="s1">'Bender'</span><span class="o">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">key</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">'Voltron'</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">'Astroy Boy'</span><span class="o">,</span> <span class="m">3</span><span class="o">:</span> <span class="s1">'Bender'</span><span class="o">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">key</span> <span class="k">is</span> <span class="nf">odd</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">'Voltron'</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">'Astroy Boy'</span><span class="o">,</span> <span class="s1">'third'</span><span class="o">:</span> <span class="s1">'Bender'</span><span class="o">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">key</span> <span class="k">is</span> <span class="nf">numeric</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">robots</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">'Voltron'</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">'Astroy Boy'</span><span class="o">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">robots</span> <span class="k">is</span> <span class="nf">iterable</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
        ...
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">world</span> <span class="o">=</span> <span class="s2">"hello"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">world</span> <span class="k">is</span> <span class="nf">sameas</span><span class="o">(</span><span class="s2">"hello"</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="s2">"it's hello"</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">external</span> <span class="o">=</span> <span class="kp">false</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">external</span> <span class="k">is</span> <span class="nf">type</span><span class="o">(</span><span class="s1">'boolean'</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="s2">"external is false or true"</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="macros">
<h2>Macros
</h2>
<p>Macros can be used to reuse logic in a template, they act as PHP functions, can receive parameters and return values:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">related_bar</span><span class="o">(</span><span class="nv">related_links</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="cp">{%</span>- <span class="k">for</span> <span class="nv">rellink</span> <span class="k">in</span> <span class="nv">related_links</span> <span class="cp">%}</span>
            <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">url</span><span class="o">(</span><span class="nv">link.url</span><span class="o">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">title=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">link.title</span><span class="o">|</span><span class="nf">striptags</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">link.text</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Print related links #}</span>
<span class="cp">{{</span> <span class="nv">related_bar</span><span class="o">(</span><span class="nv">links</span><span class="o">)</span> <span class="cp">}}</span>

<span class="nt">&lt;div&gt;</span>This is the content<span class="nt">&lt;/div&gt;</span>

<span class="c">{# Print related links again #}</span>
<span class="cp">{{</span> <span class="nv">related_bar</span><span class="o">(</span><span class="nv">links</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>When calling macros, parameters can be passed by name:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">error_messages</span><span class="o">(</span><span class="nv">message</span><span class="o">,</span> <span class="nv">field</span><span class="o">,</span> <span class="nv">type</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"error-type"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"error-field"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">field</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"error-message"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Call the macro #}</span>
<span class="cp">{{</span> <span class="nv">error_messages</span><span class="o">(</span><span class="s1">'type'</span><span class="o">:</span> <span class="s1">'Invalid'</span><span class="o">,</span> <span class="s1">'message'</span><span class="o">:</span> <span class="s1">'The name is invalid'</span><span class="o">,</span> <span class="s1">'field'</span><span class="o">:</span> <span class="s1">'name'</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Macros can return values:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">my_input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">class</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">return</span> <span class="nv">text_field</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="s1">'class'</span><span class="o">:</span> <span class="nv">class</span><span class="o">)</span> <span class="cp">%}</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Call the macro #}</span>
<span class="cp">{{</span> <span class="s1">'&lt;p&gt;'</span> <span class="o">~</span> <span class="nv">my_input</span><span class="o">(</span><span class="s1">'name'</span><span class="o">,</span> <span class="s1">'input-text'</span><span class="o">)</span> <span class="o">~</span> <span class="s1">'&lt;/p&gt;'</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>And receive optional parameters:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">my_input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">class</span><span class="o">=</span><span class="s2">"input-text"</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">return</span> <span class="nv">text_field</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="s1">'class'</span><span class="o">:</span> <span class="nv">class</span><span class="o">)</span> <span class="cp">%}</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Call the macro #}</span>
<span class="cp">{{</span> <span class="s1">'&lt;p&gt;'</span> <span class="o">~</span> <span class="nv">my_input</span><span class="o">(</span><span class="s1">'name'</span><span class="o">)</span> <span class="o">~</span> <span class="s1">'&lt;/p&gt;'</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="s1">'&lt;p&gt;'</span> <span class="o">~</span> <span class="nv">my_input</span><span class="o">(</span><span class="s1">'name'</span><span class="o">,</span> <span class="s1">'input-text'</span><span class="o">)</span> <span class="o">~</span> <span class="s1">'&lt;/p&gt;'</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="using-tag-helpers">
<h2>Using Tag Helpers
</h2>
<p>Volt is highly integrated with <a class="reference internal" href="tags.html"><em>Phalcon\Tag</em></a>, so it’s easy to use the helpers provided by that component in a Volt template:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{{</span> <span class="nv">javascript_include</span><span class="o">(</span><span class="s2">"js/jquery.js"</span><span class="o">)</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">form</span><span class="o">(</span><span class="s1">'products/save'</span><span class="o">,</span> <span class="s1">'method'</span><span class="o">:</span> <span class="s1">'post'</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="nt">&lt;label&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="cp">{{</span> <span class="nv">text_field</span><span class="o">(</span><span class="s2">"name"</span><span class="o">,</span> <span class="s2">"size"</span><span class="o">:</span> <span class="m">32</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="nt">&lt;label&gt;</span>Type<span class="nt">&lt;/label&gt;</span>
    <span class="cp">{{</span> <span class="nv">select</span><span class="o">(</span><span class="s2">"type"</span><span class="o">,</span> <span class="nv">productTypes</span><span class="o">,</span> <span class="s1">'using'</span><span class="o">:</span> <span class="o">[</span><span class="s1">'id'</span><span class="o">,</span> <span class="s1">'name'</span><span class="o">])</span> <span class="cp">}}</span>

    <span class="cp">{{</span> <span class="nv">submit_button</span><span class="o">(</span><span class="s1">'Send'</span><span class="o">)</span> <span class="cp">}}</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>The following PHP is generated:</p>
<div class="highlight-html+php">
<div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">javascriptInclude</span><span class="p">(</span><span class="s2">"js/jquery.js"</span><span class="p">)</span> <span class="cp">?&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">form</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'products/save'</span><span class="p">,</span> <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">));</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;label&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">textField</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">32</span><span class="p">));</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;label&gt;</span>Type<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">select</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'type'</span><span class="p">,</span> <span class="nv">$productTypes</span><span class="p">,</span> <span class="s1">'using'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">)));</span> <span class="cp">?&gt;</span>

    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">submitButton</span><span class="p">(</span><span class="s1">'Send'</span><span class="p">);</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>To call a Phalcon\Tag helper, you only need to call an uncamelized version of the method:</p>
<table border="1" class="docutils">
<colgroup>
<col width="61%">
<col width="39%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Method</th>
<th class="head">Volt function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>Phalcon\Tag::linkTo</td>
<td>link_to</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::textField</td>
<td>text_field</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::passwordField</td>
<td>password_field</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::hiddenField</td>
<td>hidden_field</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::fileField</td>
<td>file_field</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::checkField</td>
<td>check_field</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::radioField</td>
<td>radio_field</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::dateField</td>
<td>date_field</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::emailField</td>
<td>email_field</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::numberField</td>
<td>number_field</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::submitButton</td>
<td>submit_button</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::selectStatic</td>
<td>select_static</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::select</td>
<td>select</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::textArea</td>
<td>text_area</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::form</td>
<td>form</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::endForm</td>
<td>end_form</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::getTitle</td>
<td>get_title</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::stylesheetLink</td>
<td>stylesheet_link</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::javascriptInclude</td>
<td>javascript_include</td>
</tr>
<tr class="row-odd">
<td>Phalcon\Tag::image</td>
<td>image</td>
</tr>
<tr class="row-even">
<td>Phalcon\Tag::friendlyTitle</td>
<td>friendly_title</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions">
<h2>Functions
</h2>
<p>The following built-in functions are available in Volt:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>content</td>
<td>Includes the content produced in a previous rendering stage</td>
</tr>
<tr class="row-odd">
<td>get_content</td>
<td>Same as ‘content’</td>
</tr>
<tr class="row-even">
<td>partial</td>
<td>Dynamically loads a partial view in the current template</td>
</tr>
<tr class="row-odd">
<td>super</td>
<td>Render the contents of the parent block</td>
</tr>
<tr class="row-even">
<td>time</td>
<td>Calls the PHP function with the same name</td>
</tr>
<tr class="row-odd">
<td>date</td>
<td>Calls the PHP function with the same name</td>
</tr>
<tr class="row-even">
<td>dump</td>
<td>Calls the PHP function ‘var_dump’</td>
</tr>
<tr class="row-odd">
<td>version</td>
<td>Returns the current version of the framework</td>
</tr>
<tr class="row-even">
<td>constant</td>
<td>Reads a PHP constant</td>
</tr>
<tr class="row-odd">
<td>url</td>
<td>Generate a URL using the ‘url’ service</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="view-integration">
<h2>View Integration
</h2>
<p>Also, Volt is integrated with <a class="reference internal" href="views.html"><em>Phalcon\Mvc\View</em></a>, you can play with the view hierarchy and include partials as well:</p>
<div class="highlight-html+php">
<div class="highlight"><pre>{{ content() }}

<span class="c">&lt;!-- Simple include of a partial --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>{{ partial("partials/footer") }}<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- Passing extra variables --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>{{ partial("partials/footer", ['links': $links]) }}<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>A partial is included in runtime, Volt also provides “include”, this compiles the content of a view and returns its contents
as part of the view which was included:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# Simple include of a partial #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">"partials/footer"</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>

<span class="c">{# Passing extra variables #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">"partials/footer"</span> <span class="k">with</span> <span class="o">[</span><span class="s1">'links'</span><span class="o">:</span> <span class="nv">links</span><span class="o">]</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<div class="section" id="include">
<h3>Include
</h3>
<p>‘include’ has a special behavior that will help us improve performance a bit when using Volt, if you specify the extension
when including the file and it exists when the template is compiled, Volt can inline the contents of the template in the parent
template where it’s included. Templates aren’t inlined if the ‘include’ have variables passed with ‘with’:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# The contents of 'partials/footer.volt' is compiled and inlined #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">"partials/footer.volt"</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="template-inheritance">
<h2>Template Inheritance
</h2>
<p>With template inheritance you can create base templates that can be extended by others templates allowing to reuse code. A base template
define <em>blocks</em> than can be overridden by a child template. Let’s pretend that we have the following base template:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# templates/base.volt #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
            <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"style.css"</span> <span class="nt">/&gt;</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span> - My Webpage<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span><span class="ni">&amp;copy;</span> Copyright 2012, All rights reserved.<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>From other template we could extend the base template replacing the blocks:</p>
<div class="highlight-jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"templates/base.volt"</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x">Index</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span><span class="x">&lt;style type="text/css"&gt;.important { color: #336699; }&lt;/style&gt;</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Index&lt;/h1&gt;</span>
<span class="x">    &lt;p class="important"&gt;Welcome on my awesome homepage.&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Not all blocks must be replaced at a child template, only those that are needed. The final output produced will be the following:</p>
<div class="highlight-html">
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span><span class="nc">.important</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="m">#336699</span><span class="p">;</span> <span class="p">}</span><span class="nt">&lt;/style&gt;</span>
        <span class="nt">&lt;title&gt;</span>Index - My Webpage<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>Index<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"important"</span><span class="nt">&gt;</span>Welcome on my awesome homepage.<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
            <span class="ni">&amp;copy;</span> Copyright 2012, All rights reserved.
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="section" id="multiple-inheritance">
<h3>Multiple Inheritance
</h3>
<p>Extended templates can extend other templates. The following example illustrates this:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# main.volt #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Template “layout.volt” extends “main.volt”</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# layout.volt #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"main.volt"</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

    <span class="nt">&lt;h1&gt;</span>Table of contents<span class="nt">&lt;/h1&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Finally a view that extends “layout.volt”:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# index.volt #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"layout.volt"</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

    <span class="cp">{{</span> <span class="nb">super</span><span class="o">()</span> <span class="cp">}}</span>

    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li&gt;</span>Some option<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span>Some other option<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Rendering “index.volt” produces:</p>
<div class="highlight-html">
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;h1&gt;</span>Table of contents<span class="nt">&lt;/h1&gt;</span>

        <span class="nt">&lt;ul&gt;</span>
            <span class="nt">&lt;li&gt;</span>Some option<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>Some other option<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Note the call to the function “super()”. With that function it’s possible to render the contents of the parent block.</p>
<p>As partials, the path set to “extends” is a relative path under the current views directory (i.e. app/views/).</p>
<blockquote class="highlights">
<div>By default, and for performance reasons, Volt only checks for changes in the children templates
to know when to re-compile to plain PHP again, so it is recommended initialize Volt with the option
‘compileAlways’ =&gt; true. Thus, the templates are compiled always taking into account changes in
the parent templates.</div>
</blockquote>
</div>
</div>
<div class="section" id="autoescape-mode">
<h2>Autoescape mode
</h2>
<p>You can enable auto-escaping of all variables printed in a block using the autoescape mode:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre>Manually escaped: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span>

<span class="cp">{%</span> <span class="k">autoescape</span> <span class="kp">true</span> <span class="cp">%}</span>
    Autoescaped: <span class="cp">{{</span> <span class="nv">robot.name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">autoescape</span> <span class="kp">false</span> <span class="cp">%}</span>
        No Autoescaped: <span class="cp">{{</span> <span class="nv">robot.name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-up-the-volt-engine">
<h2>Setting up the Volt Engine
</h2>
<p>Volt can be configured to alter its default behavior, the following example explain how to do that:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Phalcon\Mvc\View</span><span class="p">,</span>
    <span class="nx">Phalcon\Mvc\View\Engine\Volt</span><span class="p">;</span>

<span class="c1">//Register Volt as a service</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'voltService'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">)</span> <span class="p">{</span>

    <span class="nv">$volt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Volt</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">);</span>

    <span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">"compiledPath"</span> <span class="o">=&gt;</span> <span class="s2">"../app/compiled-templates/"</span><span class="p">,</span>
        <span class="s2">"compiledExtension"</span> <span class="o">=&gt;</span> <span class="s2">".compiled"</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$volt</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">//Register Volt as template engine</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'view'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">View</span><span class="p">();</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s1">'../app/views/'</span><span class="p">);</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">".volt"</span> <span class="o">=&gt;</span> <span class="s1">'voltService'</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>If you do not want to reuse Volt as a service you can pass an anonymous function to register the engine instead of a service name:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Register Volt as template engine with an anonymous function</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'view'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View</span><span class="p">();</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s1">'../app/views/'</span><span class="p">);</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">".volt"</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$volt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View\Engine\Volt</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">);</span>

            <span class="c1">//set some options here</span>

            <span class="k">return</span> <span class="nv">$volt</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The following options are available in Volt:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%">
<col width="82%">
<col width="6%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Option</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>compiledPath</td>
<td>A writable path where the compiled PHP templates will be placed</td>
<td>./</td>
</tr>
<tr class="row-odd">
<td>compiledExtension</td>
<td>An additional extension appended to the compiled PHP file</td>
<td>.php</td>
</tr>
<tr class="row-even">
<td>compiledSeparator</td>
<td>Volt replaces the directory separators / and \ by this separator in order to create a single file in the compiled directory</td>
<td>%%</td>
</tr>
<tr class="row-odd">
<td>stat</td>
<td>Whether Phalcon must check if exists differences between the template file and its compiled path</td>
<td>true</td>
</tr>
<tr class="row-even">
<td>compileAlways</td>
<td>Tell Volt if the templates must be compiled in each request or only when they change</td>
<td>false</td>
</tr>
<tr class="row-odd">
<td>prefix</td>
<td>Allows to prepend a prefix to the templates in the compilation path</td>
<td>null</td>
</tr>
</tbody>
</table>
<p>The compilation path is generated according to the above options, if the developer wants total freedom defining the compilation path,
an anonymous function can be used to generate it, this function receives the relative path to the template in the
views directory. The following examples show how to change the compilation path dynamically:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Just append the .php extension to the template path</span>
<span class="c1">// leaving the compiled templates in the same directory</span>
<span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'compiledPath'</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$templatePath</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$templatePath</span> <span class="o">.</span> <span class="s1">'.php'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">));</span>

<span class="c1">// ​​Recursively create the same structure in another directory</span>
<span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'compiledPath'</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$templatePath</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$dirName</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span><span class="nv">$templatePath</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="s1">'cache/'</span> <span class="o">.</span> <span class="nv">$dirName</span><span class="p">))</span> <span class="p">{</span>
            <span class="nb">mkdir</span><span class="p">(</span><span class="s1">'cache/'</span> <span class="o">.</span> <span class="nv">$dirName</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s1">'cache/'</span> <span class="o">.</span> <span class="nv">$dirName</span> <span class="o">.</span> <span class="s1">'/'</span><span class="o">.</span> <span class="nv">$templatePath</span> <span class="o">.</span> <span class="s1">'.php'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="extending-volt">
<h2>Extending Volt
</h2>
<p>Unlike other template engines, Volt itself is not required to run the compiled templates.
Once the templates are compiled there is no dependence on Volt. With performance independence in mind,
Volt only acts as a compiler for PHP templates.</p>
<p>The Volt compiler allow you to extend it adding more functions, tests or filters to the existing ones.</p>
<div class="section" id="id3">
<h3>Functions
</h3>
<p>Functions act as normal PHP functions, a valid string name is required as function name.
Functions can be added using two strategies, returning a simple string or using an anonymous
function. Always is required that the chosen strategy returns a valid PHP string expression:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$volt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View\Engine\Volt</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">);</span>

<span class="nv">$compiler</span> <span class="o">=</span> <span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">getCompiler</span><span class="p">();</span>

<span class="c1">//This binds the function name 'shuffle' in Volt to the PHP function 'str_shuffle'</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">'shuffle'</span><span class="p">,</span> <span class="s1">'str_shuffle'</span><span class="p">);</span>
</pre></div>
</div>
<p>Register the function with an anonymous function. This case we use $resolvedArgs to pass the arguments exactly
as were passed in the arguments:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">'widget'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'MyLibrary\Widgets::get('</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Treat the arguments independently and unresolved:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">'repeat'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$compiler</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//Resolve the first argument</span>
    <span class="nv">$firstArgument</span> <span class="o">=</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">expression</span><span class="p">(</span><span class="nv">$exprArgs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'expr'</span><span class="p">]);</span>

    <span class="c1">//Checks if the second argument was passed</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$exprArgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$secondArgument</span> <span class="o">=</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">expression</span><span class="p">(</span><span class="nv">$exprArgs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">'expr'</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//Use '10' as default</span>
        <span class="nv">$secondArgument</span> <span class="o">=</span> <span class="s1">'10'</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="s1">'str_repeat('</span> <span class="o">.</span> <span class="nv">$firstArgument</span> <span class="o">.</span> <span class="s1">', '</span> <span class="o">.</span> <span class="nv">$secondArgument</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Generate the code based on some function availability:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">'contains_text'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">'mb_stripos'</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'mb_stripos('</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'stripos('</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Built-in functions can be overridden adding a function with its name:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Replace built-in function dump</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">'dump'</span><span class="p">,</span> <span class="s1">'print_r'</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>Filters
</h3>
<p>A filter has the following form in a template: leftExpr|name(optional-args). Adding new filters
is similar as seen with the functions:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//This creates a filter 'hash' that uses the PHP function 'md5'</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">'hash'</span><span class="p">,</span> <span class="s1">'md5'</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">'int'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'intval('</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Built-in filters can be overridden adding a function with its name:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Replace built-in filter 'capitalize'</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">'capitalize'</span><span class="p">,</span> <span class="s1">'lcfirst'</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="extensions">
<h3>Extensions
</h3>
<p>With extensions the developer has more flexibility to extend the template engine, and override the compilation
of ​a specific instruction, change the behavior of an expression or operator, add functions/filters, and more.</p>
<p>An extension is a class that implements the events triggered by Volt as a method of itself.</p>
<p>For example, the class below allows to use any PHP function in Volt:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PhpFunctionExtension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * This method is called on any attempt to compile a function call</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">compileFunction</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$arguments</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="nv">$name</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$name</span> <span class="o">.</span> <span class="s1">'('</span><span class="o">.</span> <span class="nv">$arguments</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above class implements the method ‘compileFunction’ which is invoked before any attempt to compile a function call in any
template. The purpose of the extension is to verify if a function to be compiled is a PHP function allowing to call it
from the template. Events in extensions must return valid PHP code, this will be used as result of the compilation
instead of the one generated by Volt. If an event doesn’t return an string the compilation is done using the default
behavior provided by the engine.</p>
<p>The following compilation events are available to be implemented in extensions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%">
<col width="85%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd">
<th class="head">Event/Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even">
<td>compileFunction</td>
<td>Triggered before trying to compile any function call in a template</td>
</tr>
<tr class="row-odd">
<td>compileFilter</td>
<td>Triggered before trying to compile any filter call in a template</td>
</tr>
<tr class="row-even">
<td>resolveExpression</td>
<td>Triggered before trying to compile any expression. This allows the developer to override operators</td>
</tr>
<tr class="row-odd">
<td>compileStatement</td>
<td>Triggered before trying to compile any expression. This allows the developer to override any statement</td>
</tr>
</tbody>
</table>
<p>Volt extensions must be in registered in the compiler making them available in compile time:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Register the extension in the compiler</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addExtension</span><span class="p">(</span><span class="k">new</span> <span class="nx">PhpFunctionExtension</span><span class="p">());</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="caching-view-fragments">
<h2>Caching view fragments
</h2>
<p>With Volt it’s easy cache view fragments. This caching improves performance preventing
that the contents of a block from being executed by PHP each time the view is displayed:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">cache</span> <span class="s2">"sidebar"</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- generate this content is slow so we are going to cache it --&gt;</span>
<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Setting a specific number of seconds:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# cache the sidebar by 1 hour #}</span>
<span class="cp">{%</span> <span class="k">cache</span> <span class="s2">"sidebar"</span> <span class="m">3600</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- generate this content is slow so we are going to cache it --&gt;</span>
<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Any valid expression can be used as cache key:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">cache</span> <span class="o">(</span><span class="s2">"article-"</span> <span class="o">~</span> <span class="nv">post.id</span><span class="o">)</span> <span class="m">3600</span> <span class="cp">%}</span>

    <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>

<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The caching is done by the <a class="reference internal" href="cache.html"><em>Phalcon\Cache</em></a> component via the view component.
Learn more about how this integration works in the section <a class="reference internal" href="views.html"><em>“Caching View Fragments”</em></a>.</p>
</div>
<div class="section" id="inject-services-into-a-template">
<h2>Inject Services into a Template
</h2>
<p>If a service container (DI) is available for Volt, you can use the services by only accessing the name of the service in the template:</p>
<div class="highlight-html+jinja">
<div class="highlight"><pre><span class="c">{# Inject the 'flash' service #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"messages"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">flash.output</span><span class="o">()</span> <span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>

<span class="c">{# Inject the 'security' service #}</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"token"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">security.getToken</span><span class="o">()</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="stand-alone-component">
<h2>Stand-alone component
</h2>
<p>Using Volt in a stand-alone mode can be demonstrated below:</p>
<div class="highlight-php">
<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Create a compiler</span>
<span class="nv">$compiler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View\Engine\Volt\Compiler</span><span class="p">();</span>

<span class="c1">//Optionally add some options</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="c1">//...</span>
<span class="p">));</span>

<span class="c1">//Compile a template string returning PHP code</span>
<span class="k">echo</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">compileString</span><span class="p">(</span><span class="s1">'{{ "hello" }}'</span><span class="p">);</span>

<span class="c1">//Compile a template in a file specifying the destination file</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">compileFile</span><span class="p">(</span><span class="s1">'layouts/main.volt'</span><span class="p">,</span> <span class="s1">'cache/layouts/main.volt.php'</span><span class="p">);</span>

<span class="c1">//Compile a template in a file based on the options passed to the compiler</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">compile</span><span class="p">(</span><span class="s1">'layouts/main.volt'</span><span class="p">);</span>

<span class="c1">//Require the compiled templated (optional)</span>
<span class="k">require</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">getCompiledTemplatePath</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="external-resources">
<h2>External Resources
</h2>
<ul class="simple">
<li>A bundle for Sublime/Textmate is available <a class="reference external" href="https://github.com/phalcon/volt-sublime-textmate">here</a>
</li>
<li>
<a class="reference external" href="http://album-o-rama.phalconphp.com">Album-O-Rama</a> is a sample application using Volt as template engine, [<a class="reference external" href="https://github.com/phalcon/album-o-rama">Github</a>]</li>
<li>
<a class="reference external" href="http://phalconphp.com">Our website</a> is running using Volt as template engine, [<a class="reference external" href="https://github.com/phalcon/website">Github</a>]</li>
<li>
<a class="reference external" href="http://forum.phalconphp.com">Phosphorum</a>, the Phalcon’s forum, also uses Volt, [<a class="reference external" href="https://github.com/phalcon/forum">Github</a>]</li>
<li>
<a class="reference external" href="http://vokuro.phalconphp.com">Vökuró</a>, is another sample application that use Volt, [<a class="reference external" href="https://github.com/phalcon/vokuro">Github</a>]</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</td>
</tr>
</table>


</div>


</body>
</html>
